<!DOCTYPE html><html lang="en"><head><style>*{box-sizing:border-box}canvas{width:100%;height:100%;position:fixed;inset:0}.settings{-webkit-backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;z-index:10;background:#0006;border:2px solid #90ee90;border-radius:.75em;padding:1rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;font-weight:700;position:absolute;inset:1rem 1rem auto;box-shadow:inset 0 0 6rem 4px green}.hide{display:none!important}.settings:focus-within{position:absolute;bottom:0;box-shadow:inset 0 0 2rem 4px green}.settings textarea{width:100%;min-height:4rem;font:inherit;color:inherit;background-color:#0000;border:none;outline:none}.settings .actions{text-align:right;font-size:.8rem}.settings .actions label{margin-bottom:.5rem;display:block}.settings .text{color:#90ee90;margin-top:0;font-size:.8rem;font-weight:400}input[type=number]{width:3rem;text-align:center;font:inherit;color:inherit;background-color:#0000;border:none;outline:none}@media screen and (min-width:768px){.settings{max-width:50%;top:auto;bottom:24px}.settings .actions label{margin:0 .5rem;display:inline-block}}div.copyright{color:#fff;z-index:999;font-size:12px;position:fixed;bottom:0;left:50%;transform:translate(-50%)}div.copyright a{color:#fff}button#btnStart{color:#fff;text-align:center;cursor:pointer;width:100%;background-color:#4caf50;border:none;border-radius:16px;margin:4px 2px;padding:15px 32px;font-size:16px;text-decoration:none}</style><title></title></head><body> <script type="module" src="/roulette/index.b3009326.js"></script> <script type="text/javascript">const MCAFE_API="https://port-0-mcafe-51r7c2alpxsdhy1.sel4.cloudtype.app";function parseName(e){const t=/(\/\d+)/,n=/(\*\d+)/,o=t.test(e),a=n.test(e);return{name:/^\s*([^\/*]+)?/.exec(e)[1],weight:o?parseInt(t.exec(e)[1].replace("/","")):1,count:a?parseInt(n.exec(e)[1].replace("*","")):1}}function getReady(e,t){window.roullete.setMarbles(e.split(",")),setWinnerRank(t),ready=e.length>0}function setWinnerRank(e){window.options.winningRank=e-1,window.roullete.setWinningRank(window.options.winningRank)}let ready=!1;document.addEventListener("DOMContentLoaded",(()=>{const e=new URLSearchParams(window.location.search),t=e.get("users"),n=e.get("count"),o=e.get("weight"),a=e.get("goal"),i=e.get("room"),s=e.get("token"),r=t.split(",").map((e=>e.trim())).filter((e=>!!e)),c=new Set,d={};r.forEach((e=>{const t=o>1?`${e}/${o}`:e;c.has(t)||(c.add(t),d[t]=0),d[t]+=Number(n)}));const l=[];Object.keys(d).forEach((e=>{d[e]>1?l.push(`${e}*${d[e]}`):l.push(e)}));const u=l.join(",");document.querySelector("#in_names").value=u,getReady(u,a),document.querySelector("#btnStart").addEventListener("click",(()=>{ready&&(window.roullete.start(),document.querySelector("#settings").classList.add("hide"))})),document.querySelector("#chkSkill").addEventListener("change",(e=>{window.options.useSkills=e.target.matches(":checked"),window.roullete.setWinningRank(window.options.winningRank)})),window.roullete.addEventListener("goal",(async e=>{ready=!1,document.querySelector("#settings").classList.remove("hide");const t=e.detail.winner,{memberList:n}=await fetch(`${MCAFE_API}/room/${i}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>e.json())),o=n.find((e=>e.nickname===t)).memberSn;await fetch(`${MCAFE_API}/dashboard/looser`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({looserSn:o,roomSn:+i,gameType:"PINBALL"})}).then((e=>e.json()))}))}));</script> <div id="settings" class="settings"> <input type="checkbox" id="chkSkill" checked class="hide"> <textarea class="hide" id="in_names" placeholder="hello :)"></textarea> <div class="actions"> <button id="btnStart">Start</button> </div> </div> <div class="copyright">&copy; 2023.<a href="https://lazygyu.net" target="_blank">origin by lazygyu, edit by brady</a> </div> </body></html>